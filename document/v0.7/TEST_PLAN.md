# 育婴宝 v0.6 版本测试计划

## 1. 测试概述

### 1.1 测试目标
验证育婴宝 v0.6 版本的所有新功能和改进是否按预期工作，确保系统稳定性和用户体验。

### 1.2 测试范围
- 用户体系优化
- 家庭管理增强
- 宝宝管理增强
- 记录管理增强
- 多宝宝支持优化

### 1.3 测试环境
- 微信开发者工具
- 后端服务 v0.6
- PostgreSQL 数据库

## 2. 测试用例

### 2.1 用户体系优化

#### TC001: 微信授权登录
**前置条件**: 用户未登录
**测试步骤**:
1. 打开小程序
2. 点击授权登录按钮
3. 允许获取用户信息
**预期结果**: 
- 成功获取用户昵称和头像
- 不需要手机号即可完成登录
- 登录成功后跳转到首页

#### TC002: 用户信息展示
**前置条件**: 用户已登录
**测试步骤**:
1. 进入"我的"页面
2. 查看用户信息展示
**预期结果**: 
- 正确显示用户昵称和头像
- 不显示手机号信息

### 2.2 家庭管理增强

#### TC003: 自动创建家庭
**前置条件**: 用户已登录但未加入家庭
**测试步骤**:
1. 登录后观察是否自动创建家庭
**预期结果**: 
- 自动创建家庭成功
- 家庭名称为"用户昵称+的家庭"

#### TC004: 家庭名称生成
**前置条件**: 无
**测试步骤**:
1. 使用不同昵称的用户登录
2. 观察创建的家庭名称
**预期结果**: 
- 家庭名称格式为"昵称+的家庭"
- 例如："张三的家庭"

#### TC005: 重复名称处理
**前置条件**: 已存在同名家庭
**测试步骤**:
1. 使用与现有家庭相同昵称的用户登录
2. 观察创建的家庭名称
**预期结果**: 
- 家庭名称格式为"昵称+的家庭#+4位随机数字"
- 例如："张三的家庭#1234"

### 2.3 宝宝管理增强

#### TC006: 宝宝ID展示
**前置条件**: 已创建宝宝信息
**测试步骤**:
1. 进入"我的"页面
2. 查看宝宝信息区域
**预期结果**: 
- 正确显示宝宝姓名和年龄
- 显示宝宝ID（数据库中的ID）

#### TC007: 宝宝信息编辑
**前置条件**: 已创建宝宝信息
**测试步骤**:
1. 进入"我的"页面
2. 点击"编辑"按钮
3. 修改宝宝信息并保存
**预期结果**: 
- 宝宝信息更新成功
- 页面显示更新后的信息

### 2.4 记录管理增强

#### TC008: 辅食记录创建 - 基础信息
**前置条件**: 已创建宝宝信息
**测试步骤**:
1. 进入首页
2. 点击"辅食"记录按钮
3. 填写基础信息（时间、类型、喂食量）
4. 保存记录
**预期结果**: 
- 记录创建成功
- 首页显示新创建的辅食记录

#### TC009: 辅食记录创建 - 增强信息
**前置条件**: 已创建宝宝信息
**测试步骤**:
1. 进入首页
2. 点击"辅食"记录按钮
3. 填写增强信息（多种食材、品牌、产地）
4. 保存记录
**预期结果**: 
- 记录创建成功
- 记录中包含填写的食材、品牌、产地信息

#### TC010: 辅食记录编辑
**前置条件**: 已创建辅食记录
**测试步骤**:
1. 进入"记录"页面
2. 找到辅食记录并点击"编辑"按钮
3. 修改记录信息并保存
**预期结果**: 
- 记录更新成功
- 页面显示更新后的记录信息
- 增强信息（食材、品牌、产地）正确显示和更新

#### TC011: 辅食记录查看
**前置条件**: 已创建包含增强信息的辅食记录
**测试步骤**:
1. 进入"记录"页面
2. 查看辅食记录详情
**预期结果**: 
- 正确显示辅食类型、喂食量
- 正确显示食材、品牌、产地信息

### 2.5 多宝宝支持优化

#### TC012: 多宝宝创建
**前置条件**: 已创建家庭
**测试步骤**:
1. 进入"我的"页面
2. 点击"添加宝宝"按钮
3. 创建多个宝宝信息
**预期结果**: 
- 可以成功创建多个宝宝
- 每个宝宝有独立的信息

#### TC013: 宝宝切换
**前置条件**: 已创建多个宝宝
**测试步骤**:
1. 在首页查看当前宝宝信息
2. 切换到另一个宝宝
3. 观察页面变化
**预期结果**: 
- 可以快速切换宝宝
- 切换后显示对应宝宝的信息和记录

#### TC014: 独立记录验证
**前置条件**: 已创建多个宝宝并为每个宝宝创建记录
**测试步骤**:
1. 切换到第一个宝宝
2. 查看记录列表
3. 切换到第二个宝宝
4. 查看记录列表
**预期结果**: 
- 每个宝宝只显示自己的记录
- 记录数据隔离正确

## 3. 数据库测试

### 3.1 数据库字段验证
**测试步骤**:
1. 检查records表结构
2. 验证新增字段是否存在
**预期结果**: 
- records表包含solid_ingredients字段
- records表包含solid_brand字段
- records表包含solid_origin字段

### 3.2 数据存储验证
**测试步骤**:
1. 创建包含增强信息的辅食记录
2. 查询数据库中的记录
**预期结果**: 
- 数据库中正确存储了食材、品牌、产地信息

## 4. 性能测试

### 4.1 页面加载性能
**测试步骤**:
1. 测量各页面加载时间
2. 记录性能数据
**预期结果**: 
- 首页加载时间 < 1.5秒
- 记录页面加载时间 < 2秒

### 4.2 数据同步性能
**测试步骤**:
1. 创建记录后观察同步时间
2. 记录性能数据
**预期结果**: 
- 数据同步时间 < 1秒

## 5. 兼容性测试

### 5.1 微信版本兼容性
**测试步骤**:
1. 在不同版本微信中测试
2. 记录兼容性问题
**预期结果**: 
- 支持微信8.0+版本
- 无兼容性问题

### 5.2 设备兼容性
**测试步骤**:
1. 在不同设备上测试
2. 记录兼容性问题
**预期结果**: 
- 支持主流手机屏幕尺寸
- 界面显示正常

## 6. 安全性测试

### 6.1 数据传输安全
**测试步骤**:
1. 检查API请求是否使用HTTPS
2. 验证数据传输加密
**预期结果**: 
- 所有API请求使用HTTPS
- 敏感数据传输加密

### 6.2 用户隐私保护
**测试步骤**:
1. 检查是否收集不必要的用户信息
2. 验证隐私设置功能
**预期结果**: 
- 不收集手机号等敏感信息
- 隐私设置功能正常

## 7. 回归测试

### 7.1 核心功能回归
**测试步骤**:
1. 测试v0.5版本的核心功能
2. 验证功能是否正常
**预期结果**: 
- v0.5版本功能正常工作
- 无回归问题

## 8. 测试执行计划

### 8.1 测试时间安排
- 功能测试: 2天
- 性能测试: 1天
- 兼容性测试: 1天
- 安全性测试: 1天
- 回归测试: 1天

### 8.2 测试资源
- 测试人员: 2人
- 测试设备: iPhone、Android手机各1台
- 测试环境: 开发环境、测试环境

## 9. 风险评估

### 9.1 技术风险
- 数据库迁移可能失败
- 新功能与旧功能兼容性问题
- 性能不达标

### 9.2 应对措施
- 提前备份数据库
- 充分进行回归测试
- 性能优化预案

## 10. 测试通过标准

### 10.1 功能测试通过标准
- 所有测试用例执行通过率 > 95%
- 关键功能测试通过率 100%
- 无严重缺陷

### 10.2 性能测试通过标准
- 页面加载时间符合要求
- 数据同步时间符合要求

### 10.3 兼容性测试通过标准
- 主流设备和微信版本兼容性良好
- 无严重兼容性问题

---

*文档版本: v0.6*  
*更新时间: 2024年9月27日*  
*维护人员: yideng-xl*