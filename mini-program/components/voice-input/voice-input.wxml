<!--components/voice-input/voice-input.wxml-->
<view class="voice-input-modal" wx:if="{{show}}" catchtap="onClose">
  <view class="voice-input-container" catchtap="{{}}">
    <!-- æ ‡é¢˜ -->
    <view class="voice-input-header">
      <text class="voice-input-title">è¯­éŸ³è¾“å…¥</text>
      <view class="voice-input-close" catchtap="onClose">âœ•</view>
    </view>

    <!-- å½•éŸ³æŒ‰é’® -->
    <view class="voice-input-content">
      <view class="record-btn-wrapper">
        <view 
          class="record-button {{isRecording ? 'recording' : ''}}" 
          bindtouchstart="onStartRecord"
          bindtouchend="onStopRecord"
        >
          <text class="record-icon">ğŸ¤</text>
          <text class="record-text">{{isRecording ? 'å½•éŸ³ä¸­...' : 'é•¿æŒ‰å½•éŸ³'}}</text>
        </view>
      </view>

      <!-- è¯†åˆ«æ–‡æœ¬ -->
      <view class="recognized-text" wx:if="{{recognizedText}}">
        <text class="text-label">è¯†åˆ«å†…å®¹ï¼š</text>
        <text class="text-content">{{recognizedText}}</text>
      </view>

      <!-- è§£æç»“æœ -->
      <view class="parse-result" wx:if="{{parseResult}}">
        <view class="parse-item">
          <text class="parse-label">ç±»å‹ï¼š</text>
          <text class="parse-value">{{parseResult.recordType}}</text>
        </view>
        <view class="parse-item">
          <text class="parse-label">ç½®ä¿¡åº¦ï¼š</text>
          <text class="parse-value">{{parseResult.confidence * 100}}%</text>
        </view>
        <view class="parse-item" wx:for="{{parseResult.extractedFields}}" wx:key="index">
          <text class="parse-label">{{item.key}}ï¼š</text>
          <text class="parse-value">{{item.value}}</text>
        </view>
      </view>

      <!-- è§£æä¸­ -->
      <view class="parsing" wx:if="{{isParsing}}">
        <text>æ­£åœ¨è§£æ...</text>
      </view>
    </view>

    <!-- æŒ‰é’® -->
    <view class="voice-input-footer">
      <button class="btn btn-cancel" bindtap="onCancel">å–æ¶ˆ</button>
      <button class="btn btn-confirm" bindtap="onConfirm" disabled="{{!parseResult}}">ç¡®è®¤</button>
    </view>
  </view>
</view>

